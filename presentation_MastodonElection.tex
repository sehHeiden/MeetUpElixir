% !TeX spellcheck = en_GB
\documentclass[usenames,dvipsnames,aspectratio=169]{beamer}
\usepackage{tcolorbox} % Add this package
\usepackage{tikz}
\usetikzlibrary{shadows, positioning, shapes.geometric, arrows.meta, fit, decorations.pathmorphing, er}
\usepackage{pgfplots}
\usepackage{pgfplotstable}
\usepackage{pgf-pie}
\usepackage{graphicx}
\usetheme{Szeged}
\usecolortheme{beaver}


% Define custom colors for Elixir
\definecolor{ElixirPurple}{RGB}{104, 55, 155} % Adjust the RGB values to match Elixir's purple
\definecolor{ElixirLightPurple}{RGB}{170, 120, 210} % A lighter shade of purple
\definecolor{ElixirVeryLightPurple}{RGB}{230, 220, 250} % A very light shade of purple for the background


% Setting color of bars
% Setting colors for the bars and title
\setbeamercolor{palette primary}{bg=ElixirPurple,fg=white}
\setbeamercolor{palette secondary}{bg=ElixirLightPurple,fg=white}
\setbeamercolor{palette tertiary}{bg=ElixirPurple,fg=white}
\setbeamercolor{palette quaternary}{bg=ElixirPurple,fg=white}
\setbeamercolor{titlelike}{parent=palette primary, fg=white}
\setbeamercolor{frametitle}{fg=white,bg=ElixirPurple}
\setbeamercolor{background canvas}{bg=ElixirVeryLightPurple}


% Set item colors
\setbeamercolor{item}{fg=ElixirPurple}
\setbeamercolor{itemize item}{fg=ElixirPurple}
\setbeamercolor{itemize subitem}{fg=ElixirPurple}


\title{Sentiment Analysis on Mastodon Posts}
\subtitle{Predicting Election Outcomes with Elixir?}
\author{Sebastian Heiden}
\institute{Harz University of Applied Sciences}
\date{\today}

\newcommand{\graybar}[4]{
	\begin{tikzpicture}[remember picture, overlay]
		\node at (current page.north west) [anchor=north west, xshift=#1, yshift=#2] {
			\begin{tikzpicture}
				\draw[fill=gray!10, draw=none] (0, 0) rectangle (#3, -#4);
			\end{tikzpicture}
		};
	\end{tikzpicture}
}



% Define a custom command for post-it notes
% Arguments:
% 1: Horizontal shift (positive value moves right, negative left)
% 2: Vertical shift (positive value moves up, negative down)
% 3: Width of the post-it note
% 4: Text to be placed in the post-it note
\newcommand{\postitnote}[4]{
	\begin{tikzpicture}[remember picture, overlay]
		\node[anchor=north west, 
		xshift=#1, 
		yshift=#2, 
		fill=yellow!40, 
		draw=black, 
		thick, 
		text width=#3, 
		rounded corners, 
		drop shadow] 
		at (current page.north west) 
		{#4};
	\end{tikzpicture}
}


\logo{\includegraphics[height=1cm]{pictures/LogoElixirBerlin.png}} % Adjust size as needed

\begin{document}
	
	{
		\setbeamertemplate{headline}{} % Removes header from title page
		\begin{frame}
			\titlepage
		\end{frame}
	}
	
	% Your other slides go here
	
	\section{About Me}
	\include{aboutme}
	
	\section{Motivation}
	\include{motivation}
	
	\section{DS Background}
	\include{ds}
	
	\section{Baseline}
	\include{polls}
	
	
	\section{Lets Get some Data}
	\begin{frame}{Research Question}
		
		Predict the voting result of the 2023 Bavarian State election with Mastodon.
		
		\begin{itemize}
			\item time period: six weeks
			\item  
		\end{itemize}
		
	\end{frame}
	
	\begin{frame}{Sourcing}
		
		\begin{itemize}
			\item Search: {{instance\_url}}\/api\/v1\/timelines\/tag/{{tag\_name}}
			\begin{itemize}
				\item opt-in
				\item finished role out 2 days before election
			\end{itemize}
			\item Tags: {{isntance\_url}}\/api\/v2\/search?q={{search\_word}}
			\begin{itemize}
				\item used public timeline
			\end{itemize}
			
		\end{itemize}
	\end{frame}
	
	\begin{frame}{Data Understanding}
		
		\begin{figure}[htbp]
			\centering
			\resizebox{\columnwidth}{!}{\input{pictures/paper/TiKz/database.tex}}
			\caption{ER Diagram}
		\end{figure}
		%\input{pictures/paper/TiKz/database.tex}
		
	\end{frame}
	
	\begin{frame}{Data Understanding 2}
		\begin{figure}[htbp]
		\centering
		\includegraphics[width=\linewidth]{pictures/example_posts.png}
		\caption{Example Post}
		\end{figure}
	\end{frame}
	
	\begin{frame}{Data Cleaning}
		\begin{columns}
			
			\begin{column}{0.45\textwidth}
				\begin{tcolorbox}[colback=white, colframe=ElixirPurple, arc=3mm, boxrule=0mm, height=0.8\textheight, valign=center, title=Text Cleaning]
					
				\begin{itemize}
					\item html tags
					\item links
					\item special characters
					\item double spaces
				\end{itemize}
				
				
				\end{tcolorbox}
			\end{column}
			
			\begin{column}{0.45\textwidth}
				\begin{tcolorbox}[colback=white, colframe=ElixirPurple, arc=3mm, boxrule=0mm, height=0.8\textheight, valign=center, title=Post Selection]
					
					\begin{itemize}
						\item regional filter
						\begin{itemize}
							\item name local entity
							\item name any candidate
						\end{itemize}
						\item party attribution filter
												\begin{itemize}
							\item single party in post
							\item party highest frequency in post
						\end{itemize}
						\item text length
						\item double spaces
					\end{itemize}
					
					
				\end{tcolorbox}
			\end{column}
		\end{columns}
	\end{frame}
	

	
	\begin{frame}{Post Frequencies}
		\includegraphics[width=\linewidth, keepaspectratio]{pictures/paper/sentiments/visualization_valid_posts_frequency.png}
	\end{frame}
	
	\begin{frame}{Region Classification}
		\begin{columns}
			
			\begin{column}{0.45\textwidth}
				\begin{tcolorbox}[colback=white, colframe=ElixirPurple, arc=3mm, boxrule=0mm, height=0.8\textheight, valign=center, title=Text Cleaning]
					\begin{figure}[htbp]
						\centering
						\resizebox{\columnwidth}{!}{\input{pictures/paper/TiKz/region_selection.tex}}
						\caption{High Level}
					\end{figure}
				%\input{pictures/paper/TiKz/region_selection.tex}
				\end{tcolorbox}
			\end{column}
			
			\begin{column}{0.45\textwidth}
				\begin{tcolorbox}[colback=white, colframe=ElixirPurple, arc=3mm, boxrule=0mm, height=0.8\textheight, valign=center, title=Post Selection]
					
					\begin{figure}[htbp]
						\centering
						\resizebox{\columnwidth}{!}{\input{pictures/paper/TiKz/language_classification.tex}}
						\caption{High Level}
					\end{figure}
					%\input{pictures/paper/TiKz/language_classification.tex}
				\end{tcolorbox}
			\end{column}
		\end{columns}
	\end{frame}
	
	
\begin{frame}{Sentiment analysis}
	todo: show example
\end{frame}
	
\end{document}

